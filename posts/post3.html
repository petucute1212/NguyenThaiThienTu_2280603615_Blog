<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <title>XÃ¢y dá»±ng Server Ä‘a luá»“ng trong Java</title>
    <link rel="stylesheet" href="../css/style.css" />
</head>
<body>
    <header>
        <h1>XÃ¢y dá»±ng Server Ä‘a luá»“ng (Multi-threaded Server) trong Java</h1>
        <nav><a href="../index.html">â‡  Trá»Ÿ vá» trang chá»§</a></nav>
    </header>
    <main>
        <p style="color: #d4af37; font-size: 1.1em; margin-bottom: 25px;"><b>ğŸ“… NgÃ y Ä‘Äƒng:</b> 21/10/2025</p>

        <section>
            <h2>1. Táº¡i sao cáº§n server Ä‘a luá»“ng?</h2>
            <p>
                Trong mÃ´ hÃ¬nh client-server thÃ´ng thÆ°á»ng, náº¿u server chá»‰ xá»­ lÃ½ <b>má»™t client táº¡i má»™t thá»i Ä‘iá»ƒm</b>, 
                cÃ¡c client khÃ¡c sáº½ pháº£i chá» Ä‘áº¿n khi káº¿t ná»‘i trÆ°á»›c Ä‘Ã³ káº¿t thÃºc. Äiá»u nÃ y lÃ m giáº£m hiá»‡u suáº¥t nghiÃªm trá»ng vÃ  tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng.
            </p>
            
            <h3>1.1. Váº¥n Ä‘á» vá»›i Single-threaded Server</h3>
            <p>
                Má»™t server Ä‘Æ¡n luá»“ng cÃ³ nhá»¯ng háº¡n cháº¿ sau:
            </p>
            <ul>
                <li><b>Blocking:</b> Má»—i client pháº£i chá» client trÆ°á»›c Ä‘Ã³ káº¿t thÃºc</li>
                <li><b>Hiá»‡u quáº£ tháº¥p:</b> LÃ£ng phÃ­ tÃ i nguyÃªn CPU khi Ä‘ang chá» I/O operations</li>
                <li><b>KhÃ´ng má»Ÿ rá»™ng Ä‘Æ°á»£c:</b> Sá»‘ lÆ°á»£ng client Ä‘á»“ng thá»i bá»‹ giá»›i háº¡n</li>
                <li><b>Poor user experience:</b> Response time cháº­m khi cÃ³ nhiá»u ngÆ°á»i dÃ¹ng</li>
            </ul>
            
            <p><b>VÃ­ dá»¥ thá»±c táº¿:</b></p>
            <p>
                HÃ£y tÆ°á»Ÿng tÆ°á»£ng má»™t web server chá»‰ xá»­ lÃ½ má»™t request táº¡i má»™t thá»i Ä‘iá»ƒm. 
                Khi User A Ä‘ang táº£i trang web (cÃ³ thá»ƒ máº¥t 2-3 giÃ¢y), User B, C, D... 
                pháº£i chá» Ä‘áº¿n lÆ°á»£t mÃ¬nh. Trong tháº¿ giá»›i hiá»‡n Ä‘áº¡i, Ä‘iá»u nÃ y hoÃ n toÃ n khÃ´ng cháº¥p nháº­n Ä‘Æ°á»£c!
            </p>
            
            <h3>1.2. Giáº£i phÃ¡p: Multi-threading</h3>
            <p>
                Äá»ƒ giáº£i quyáº¿t, ta cáº§n <b>Ä‘a luá»“ng (multi-threading)</b>: má»—i khi cÃ³ má»™t client káº¿t ná»‘i má»›i, 
                server sáº½ táº¡o má»™t thread riÃªng Ä‘á»ƒ phá»¥c vá»¥ káº¿t ná»‘i Ä‘Ã³. 
                Nhá» váº­y, nhiá»u client cÃ³ thá»ƒ giao tiáº¿p vá»›i server Ä‘á»“ng thá»i mÃ  khÃ´ng bá»‹ ngháº½n.
            </p>
            
            <p><b>Æ¯u Ä‘iá»ƒm cá»§a Multi-threaded Server:</b></p>
            <ul>
                <li><b>Concurrent handling:</b> Xá»­ lÃ½ nhiá»u client Ä‘á»“ng thá»i</li>
                <li><b>Better resource utilization:</b> Táº­n dá»¥ng tá»‘i Ä‘a CPU vÃ  memory</li>
                <li><b>Scalability:</b> CÃ³ thá»ƒ má»Ÿ rá»™ng Ä‘á»ƒ phá»¥c vá»¥ nhiá»u ngÆ°á»i dÃ¹ng hÆ¡n</li>
                <li><b>Non-blocking:</b> Má»™t thread báº­n khÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n thread khÃ¡c</li>
                <li><b>Improved response time:</b> NgÆ°á»i dÃ¹ng nháº­n pháº£n há»“i nhanh hÆ¡n</li>
            </ul>
            
            <h3>1.3. Khi nÃ o sá»­ dá»¥ng Multi-threading?</h3>
            <ul>
                <li>Chat server vá»›i nhiá»u phÃ²ng chat</li>
                <li>Web server cáº§n xá»­ lÃ½ nhiá»u request Ä‘á»“ng thá»i</li>
                <li>Game server multi-player</li>
                <li>File server vá»›i nhiá»u client upload/download</li>
                <li>API server cáº§n response nhanh cho nhiá»u client</li>
            </ul>
        </section>

        <section>
            <h2>2. CÃ¡ch Java xá»­ lÃ½ Ä‘a luá»“ng trong láº­p trÃ¬nh máº¡ng</h2>
            <p>
                Java há»— trá»£ Ä‘a luá»“ng tá»« cáº¥p Ä‘á»™ ngÃ´n ngá»¯. 
                Má»—i thread trong Java lÃ  má»™t Ä‘á»‘i tÆ°á»£ng cá»§a lá»›p <code>Thread</code> hoáº·c má»™t tÃ¡c vá»¥ thá»±c thi <code>Runnable</code>.  
                Khi káº¿t há»£p vá»›i <b>ServerSocket</b>, ta cÃ³ thá»ƒ táº¡o má»™t vÃ²ng láº·p chÃ­nh Ä‘á»ƒ láº¯ng nghe káº¿t ná»‘i, 
                vÃ  má»—i khi cÃ³ client má»›i, táº¡o má»™t thread riÃªng cho client Ä‘Ã³.
            </p>
        </section>

        <section>
            <h2>3. VÃ­ dá»¥: Multi-threaded Server Ä‘Æ¡n giáº£n</h2>

            <pre><code>
// Server.java
import java.io.*;
import java.net.*;

public class Server {
    public static void main(String[] args) throws IOException {
        ServerSocket serverSocket = new ServerSocket(1234);
        System.out.println("Server Ä‘ang cháº¡y, chá» káº¿t ná»‘i...");

        while (true) {
            Socket clientSocket = serverSocket.accept();
            System.out.println("Káº¿t ná»‘i má»›i tá»«: " + clientSocket.getInetAddress());
            new ClientHandler(clientSocket).start();
        }
    }
}

// Thread phá»¥c vá»¥ má»—i client
class ClientHandler extends Thread {
    private Socket socket;

    public ClientHandler(Socket socket) {
        this.socket = socket;
    }

    public void run() {
        try {
            BufferedReader input = new BufferedReader(
                new InputStreamReader(socket.getInputStream())
            );
            PrintWriter output = new PrintWriter(socket.getOutputStream(), true);

            String message;
            while ((message = input.readLine()) != null) {
                System.out.println("Client nÃ³i: " + message);
                output.println("Server pháº£n há»“i: " + message.toUpperCase());
            }

            socket.close();
        } catch (IOException e) {
            System.out.println("Lá»—i client: " + e.getMessage());
        }
    }
}
            </code></pre>

            <p>
                á» vÃ­ dá»¥ nÃ y, <code>Server</code> liÃªn tá»¥c láº¯ng nghe cÃ¡c yÃªu cáº§u tá»« client. 
                Má»—i khi cÃ³ káº¿t ná»‘i, nÃ³ táº¡o ra má»™t <code>ClientHandler</code> (thread má»›i) Ä‘á»ƒ xá»­ lÃ½ Ä‘á»™c láº­p.
            </p>

            <h3>Client máº«u Ä‘á»ƒ kiá»ƒm thá»­:</h3>
            <pre><code>
// Client.java
import java.io.*;
import java.net.*;

public class Client {
    public static void main(String[] args) throws IOException {
        Socket socket = new Socket("localhost", 1234);
        BufferedReader input = new BufferedReader(new InputStreamReader(System.in));
        PrintWriter output = new PrintWriter(socket.getOutputStream(), true);
        BufferedReader response = new BufferedReader(
            new InputStreamReader(socket.getInputStream())
        );

        String msg;
        while (true) {
            System.out.print("Báº¡n: ");
            msg = input.readLine();
            if ("exit".equalsIgnoreCase(msg)) break;
            output.println(msg);
            System.out.println("Server: " + response.readLine());
        }

        socket.close();
    }
}
            </code></pre>

            <p>
                Má»Ÿ nhiá»u cá»­a sá»• console vÃ  cháº¡y nhiá»u client cÃ¹ng lÃºc â€” báº¡n sáº½ tháº¥y má»—i client Ä‘á»u nháº­n pháº£n há»“i riÃªng biá»‡t, 
                minh chá»©ng server Ä‘ang hoáº¡t Ä‘á»™ng Ä‘a luá»“ng.
            </p>
        </section>

        <section>
            <h2>4. Káº¿t luáº­n</h2>
            <p>
                Server Ä‘a luá»“ng lÃ  ná»n táº£ng cho cÃ¡c há»‡ thá»‘ng máº¡ng hiá»‡n Ä‘áº¡i, 
                tá»« web server, chat server Ä‘áº¿n game online. 
                Java cung cáº¥p API máº¡nh máº½ vÃ  dá»… dÃ¹ng Ä‘á»ƒ xÃ¢y dá»±ng cÃ¡c há»‡ thá»‘ng nhÆ° váº­y.  
                Trong bÃ i sau, chÃºng ta sáº½ má»Ÿ rá»™ng mÃ´ hÃ¬nh nÃ y thÃ nh <b>Server Chat nhiá»u ngÆ°á»i</b> 
                â€” nÆ¡i cÃ¡c client cÃ³ thá»ƒ gá»­i tin nháº¯n vÃ  nháº­n pháº£n há»“i tá»« nhá»¯ng ngÆ°á»i khÃ¡c trong cÃ¹ng phÃ²ng.
            </p>
        </section>
    </main>
    <footer>
        <p><i>Â© 2025 - Blog Láº­p TrÃ¬nh Máº¡ng vá»›i Java</i></p>
    </footer>
</body>
</html>
