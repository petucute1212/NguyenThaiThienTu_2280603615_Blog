<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <title>X√¢y d·ª±ng Chat Server nhi·ªÅu ng∆∞·ªùi trong Java</title>
    <link rel="stylesheet" href="../css/style.css" />
</head>
<body>
    <header>
        <h1>X√¢y d·ª±ng Chat Server nhi·ªÅu ng∆∞·ªùi (Group Chat) trong Java</h1>
        <nav><a href="../index.html">‚á† Tr·ªü v·ªÅ trang ch·ªß</a></nav>
    </header>

    <main>
        <p style="color: #d4af37; font-size: 1.1em; margin-bottom: 25px;"><b>üìÖ Ng√†y ƒëƒÉng:</b> 22/10/2025</p>

        <section>
            <h2>1. Gi·ªõi thi·ªáu v·ªÅ Chat Server ƒëa ng∆∞·ªùi d√πng</h2>
            <p>
                Trong c√°c ·ª©ng d·ª•ng chat hi·ªán ƒë·∫°i, server kh√¥ng ch·ªâ ph·∫£n h·ªìi t·ª´ng client, 
                m√† ph·∫£i truy·ªÅn t·∫£i th√¥ng ƒëi·ªáp t·ªõi t·∫•t c·∫£ nh·ªØng ng∆∞·ªùi ƒëang tham gia c√πng "ph√≤ng chat".
                ƒê·ªÉ l√†m ƒë∆∞·ª£c ƒëi·ªÅu n√†y, ta c·∫ßn x√¢y d·ª±ng m·ªôt <b>server c√≥ kh·∫£ nƒÉng broadcast</b> ‚Äî ph√°t th√¥ng ƒëi·ªáp ƒë·∫øn m·ªçi client ƒëang k·∫øt n·ªëi.
            </p>
            
            <h3>1.1. H·ªá th·ªëng Chat trong th·ª±c t·∫ø</h3>
            <p>
                C√°c h·ªá th·ªëng chat ph·ªï bi·∫øn nh∆∞ Slack, Discord, Telegram hay WhatsApp ƒë·ªÅu ho·∫°t ƒë·ªông d·ª±a tr√™n m√¥ h√¨nh n√†y:
            </p>
            <ul>
                <li><b>Centralized Server:</b> Server trung t√¢m qu·∫£n l√Ω t·∫•t c·∫£ tin nh·∫Øn</li>
                <li><b>Broadcast:</b> Khi m·ªôt ng∆∞·ªùi g·ª≠i tin, server g·ª≠i cho t·∫•t c·∫£ ng∆∞·ªùi kh√°c trong ph√≤ng</li>
                <li><b>Real-time:</b> Tin nh·∫Øn hi·ªÉn th·ªã g·∫ßn nh∆∞ ngay l·∫≠p t·ª©c</li>
                <li><b>User Management:</b> Qu·∫£n l√Ω ng∆∞·ªùi tham gia, r·ªùi kh·ªèi chat</li>
            </ul>
            
            <h3>1.2. Ki·∫øn tr√∫c c·ªßa h·ªá th·ªëng</h3>
            <p>
                H·ªá th·ªëng chat c·ªßa ch√∫ng ta s·∫Ω g·ªìm c√°c th√†nh ph·∫ßn:
            </p>
            <ul>
                <li><b>Chat Server:</b> ƒêi·ªÉm trung t√¢m, qu·∫£n l√Ω t·∫•t c·∫£ k·∫øt n·ªëi v√† tin nh·∫Øn</li>
                <li><b>Client Handler:</b> M·ªói client c√≥ m·ªôt handler ri√™ng (thread ri√™ng)</li>
                <li><b>Client Pool:</b> Danh s√°ch t·∫•t c·∫£ client ƒëang online</li>
                <li><b>Broadcast Mechanism:</b> C∆° ch·∫ø ph√°t tin nh·∫Øn ƒë·∫øn t·∫•t c·∫£ client</li>
            </ul>
            
            <h3>1.3. C√°c t√≠nh nƒÉng ch√≠nh</h3>
            <ul>
                <li>‚úÖ Nhi·ªÅu ng∆∞·ªùi chat c√πng l√∫c trong m·ªôt ph√≤ng</li>
                <li>‚úÖ Hi·ªÉn th·ªã t√™n ng∆∞·ªùi g·ª≠i</li>
                <li>‚úÖ Th√¥ng b√°o ai ƒë√£ tham gia/r·ªùi ph√≤ng</li>
                <li>‚úÖ Nh·∫≠n tin nh·∫Øn t·ª´ b√†n ph√≠m v√† g·ª≠i l√™n server</li>
                <li>‚úÖ Nh·∫≠n tin nh·∫Øn t·ª´ server v√† hi·ªÉn th·ªã tr√™n m√†n h√¨nh</li>
            </ul>
        </section>

        <section>
            <h2>2. √ù t∆∞·ªüng tri·ªÉn khai</h2>
            <ul>
                <li>Server l·∫Øng nghe c√°c k·∫øt n·ªëi m·ªõi qua <code>ServerSocket</code>.</li>
                <li>M·ªói client ƒë∆∞·ª£c x·ª≠ l√Ω trong m·ªôt thread ri√™ng (gi·ªëng b√†i tr∆∞·ªõc).</li>
                <li>T·∫•t c·∫£ client ƒëang ho·∫°t ƒë·ªông ƒë∆∞·ª£c l∆∞u trong m·ªôt danh s√°ch chung (v√≠ d·ª•: <code>ArrayList&lt;PrintWriter&gt;</code>).</li>
                <li>Khi m·ªôt client g·ª≠i tin nh·∫Øn, server g·ª≠i n√≥ ƒë·∫øn m·ªçi client kh√°c trong danh s√°ch.</li>
            </ul>
        </section>

        <section>
            <h2>3. M√£ ngu·ªìn minh h·ªça</h2>

            <h3>Server.java</h3>
            <pre><code>
import java.io.*;
import java.net.*;
import java.util.*;

public class ChatServer {
    private static final int PORT = 1234;
    private static Set&lt;PrintWriter&gt; clientWriters = new HashSet&lt;&gt;();

    public static void main(String[] args) throws IOException {
        System.out.println("Chat Server ƒëang ch·∫°y...");
        ServerSocket serverSocket = new ServerSocket(PORT);

        while (true) {
            Socket clientSocket = serverSocket.accept();
            System.out.println("Client m·ªõi k·∫øt n·ªëi: " + clientSocket.getInetAddress());
            new ClientHandler(clientSocket).start();
        }
    }

    private static class ClientHandler extends Thread {
        private Socket socket;
        private PrintWriter out;
        private BufferedReader in;
        private String name;

        public ClientHandler(Socket socket) {
            this.socket = socket;
        }

        public void run() {
            try {
                in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
                out = new PrintWriter(socket.getOutputStream(), true);

                out.println("Nh·∫≠p t√™n c·ªßa b·∫°n:");
                name = in.readLine();
                synchronized (clientWriters) {
                    clientWriters.add(out);
                }

                broadcast(">> " + name + " ƒë√£ tham gia ph√≤ng chat!");

                String message;
                while ((message = in.readLine()) != null) {
                    if (message.equalsIgnoreCase("exit")) break;
                    broadcast(name + ": " + message);
                }

                synchronized (clientWriters) {
                    clientWriters.remove(out);
                }
                broadcast("<< " + name + " ƒë√£ r·ªùi ph√≤ng chat.");
                socket.close();

            } catch (IOException e) {
                System.out.println("L·ªói client: " + e.getMessage());
            }
        }

        private void broadcast(String message) {
            synchronized (clientWriters) {
                for (PrintWriter writer : clientWriters) {
                    writer.println(message);
                }
            }
        }
    }
}
            </code></pre>

            <h3>Client.java</h3>
            <pre><code>
import java.io.*;
import java.net.*;

public class ChatClient {
    public static void main(String[] args) throws IOException {
        Socket socket = new Socket("localhost", 1234);
        BufferedReader input = new BufferedReader(new InputStreamReader(System.in));
        BufferedReader serverIn = new BufferedReader(new InputStreamReader(socket.getInputStream()));
        PrintWriter out = new PrintWriter(socket.getOutputStream(), true);

        // Thread nh·∫≠n tin nh·∫Øn t·ª´ server
        new Thread(() -> {
            try {
                String serverMsg;
                while ((serverMsg = serverIn.readLine()) != null) {
                    System.out.println(serverMsg);
                }
            } catch (IOException e) {
                System.out.println("M·∫•t k·∫øt n·ªëi server.");
            }
        }).start();

        // G·ª≠i tin nh·∫Øn l√™n server
        String msg;
        while ((msg = input.readLine()) != null) {
            out.println(msg);
            if ("exit".equalsIgnoreCase(msg)) break;
        }
        socket.close();
    }
}
            </code></pre>

            <p>
                Khi b·∫°n m·ªü nhi·ªÅu c·ª≠a s·ªï client v√† k·∫øt n·ªëi c√πng l√∫c, m·ªçi tin nh·∫Øn ƒë·ªÅu s·∫Ω hi·ªÉn th·ªã tr√™n t·∫•t c·∫£ m√†n h√¨nh.  
                ƒê√¢y ch√≠nh l√† m√¥ h√¨nh **broadcast chat c∆° b·∫£n** ‚Äì b∆∞·ªõc ƒë·∫ßu c·ªßa m·ªçi ·ª©ng d·ª•ng chat hi·ªán ƒë·∫°i.
            </p>
        </section>

        <section>
            <h2>4. M·ªü r·ªông v√† c·∫£i ti·∫øn</h2>
            <ul>
                <li>Th√™m timestamp (th·ªùi gian g·ª≠i tin).</li>
                <li>Th√™m nickname c·ªë ƒë·ªãnh v√† x√°c th·ª±c ƒë∆°n gi·∫£n.</li>
                <li>Th√™m command nh∆∞ <code>/list</code> ƒë·ªÉ hi·ªÉn th·ªã ng∆∞·ªùi ƒëang online.</li>
                <li>T√°ch c√°c ph√≤ng chat ri√™ng bi·ªát (multi-room).</li>
                <li>K·∫øt h·ª£p GUI b·∫±ng JavaFX ho·∫∑c Swing ƒë·ªÉ hi·ªÉn th·ªã giao di·ªán th√¢n thi·ªán h∆°n.</li>
            </ul>
        </section>

        <section>
            <h2>5. K·∫øt lu·∫≠n</h2>
            <p>
                Chat Server nhi·ªÅu ng∆∞·ªùi l√† v√≠ d·ª• th·ª±c t·∫ø cho th·∫•y s·ª©c m·∫°nh c·ªßa l·∫≠p tr√¨nh m·∫°ng Java k·∫øt h·ª£p ƒëa lu·ªìng.  
                B·∫±ng vi·ªác d√πng chung danh s√°ch writer v√† broadcast, ta c√≥ th·ªÉ d·ªÖ d√†ng m·ªü r·ªông th√†nh ·ª©ng d·ª•ng chat ho√†n ch·ªânh, 
                ho·∫∑c l√†m n·ªÅn cho game online v√† c√°c ·ª©ng d·ª•ng c·ªông t√°c.
            </p>
        </section>
    </main>

    <footer>
        <p><i>¬© 2025 - Blog L·∫≠p Tr√¨nh M·∫°ng v·ªõi Java</i></p>
    </footer>
</body>
</html>
